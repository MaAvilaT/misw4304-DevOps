option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application:app

packages:
  yum:
    git: []
    postgresql93-devel: []

container_commands:
  01_migrate:
    command: "pipenv run python manage.py migrate"
    leader_only: true

files:
  "/etc/httpd/conf.d/wsgi_custom.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      WSGIApplicationGroup %{GLOBAL}

commands:
  create_log_dir:
    command: "mkdir -p /var/log/myapp"
  change_permissions:
    command: "chown -R webapp:webapp /var/log/myapp"
  install_requirements:
    command: "pipenv install --deploy --ignore-pipfile"