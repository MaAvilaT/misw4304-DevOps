option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application:application

packages:
  dnf:
    git: []
    postgresql: []
    postgresql-server: []
    python3-devel: []
    gcc: []

files:
  "/etc/myapp/config.json":
    mode: "000644"
    owner: root
    group: root
    content: |
      WSGIApplicationGroup %{GLOBAL}

  "/var/app/current/my_env.txt":
    mode: "000644"
    owner: webapp
    group: webapp
    content: |
      ENVIRONMENT=development

container_commands:
  install_pipenv:
    command: "pip install pipenv"

  create_log_dir:
    command: "mkdir -p /var/log/myapp"

  change_permissions:
    command: "chown -R webapp:webapp /var/log/myapp"

commands:
  install_requirements:
    command: "pipenv install --deploy --ignore-pipfile"
