option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application:application

packages:
  yum:
    git: []
    postgresql93-devel: []
    python3-devel: []
    gcc: []

files:
  "/etc/myapp/config.json":
    mode: "000644"
    owner: root
    group: root
    content: |
      WSGIApplicationGroup %{GLOBAL}

  "/var/app/current/my_env.txt":
    mode: "000644"
    owner: webapp
    group: webapp
    content: |
      ENVIRONMENT=production

container_commands:
  01_install_pipenv:
    command: "pip install pipenv"

commands:
  create_log_dir:
    command: "mkdir -p /var/log/myapp"
  change_permissions:
    command: "chown -R webapp:webapp /var/log/myapp"
  install_requirements:
    command: "pipenv install --deploy --ignore-pipfile"